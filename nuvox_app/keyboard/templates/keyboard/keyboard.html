{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_filters %}

{% block head %}
    <link rel="stylesheet" type="text/css" href="{% static 'keyboard/keyboard.css' %}">
    <script src={% static 'keyboard/keyboard_ajax.js' %}></script>
    <script src={% static 'keyboard/keyboard.js' %}></script>
    {{ is_mobile|json_script:"is_mobile" }}
    <script>
        const isMobile = JSON.parse(document.getElementById('is_mobile').textContent);
    </script>
{% endblock head %}

{% block content %}

    <script>
        function submitSwipe() {
            $.ajax({
                    url: '/data-collection-swipes/',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        "target_text": targetText,
                        "trace": trace,
                    }),
                    beforeSend: function(xhr){xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');},
                    dataType: 'json',
                    success: function () {
                        alert('Thanks for submitting a swipe!')
                    }
                }
            );
        }
    </script>

    <div id="target-word-container">
        <!--Note text is set dynamically by js.-->
        <h1 id="target-word"></h1>
    </div>
    <div id="sketchpadapp">
        <!--Note specifying width and height here as well as in CSS seems to be necessary for some reason-->
        <canvas id="sketchpad"
                style="background-image: url({% static "keyboard/assets/nuvox_keyboard_img.png" %})">
        </canvas>
    </div>
{% endblock %}
